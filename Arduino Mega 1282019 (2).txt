#include <Wire.h>
#include <EEPROM.h>

char abuffer[40];
boolean receiveFlag = false;
String userbuffer[5];

char aUsername[40];
char aPassword[40];

int i = 0;
int a = 0;

String userUsername;
String userPassword;
String eepromTest;

int credAdd = 0;

void setup() {
  // put your setup code here, to run once:
  Serial.begin(9600);
  Serial.println("Starting up");
  Wire.begin(1);
  Wire.onReceive(receiveEvent);
}

void loop() {
  // put your main code here, to run repeatedly:
}

void receiveEvent(int howMany)
{
  memset(abuffer, 0, sizeof(abuffer));

  while (Wire.available())
  {
    Wire.readBytes(abuffer, howMany);
    receiveFlag = true;
  }

  userbuffer[i] = abuffer;

  Serial.println(userbuffer[i]);

  i++;
  a++;

  if (a == 2) {

    strcpy(aUsername, userbuffer[0].c_str());
    strcpy(aPassword, userbuffer[1].c_str());

    Serial.println(aUsername);
    Serial.println(aPassword);

    EEPROM.put(credAdd, aUsername);
    credAdd += sizeof(aUsername);
    EEPROM.put(credAdd, aPassword);

    Serial.println("Your username is " + userbuffer[0] + " and your password is " + userbuffer[1] + ".");

    char userTest[40];
    char passTest[40];
    credAdd = 0;

    EEPROM.get(credAdd, userTest);
    credAdd += sizeof(userTest);
    EEPROM.get(credAdd, passTest);

    Serial.println();
    Serial.println(userTest);
    Serial.println(passTest);
  }
}